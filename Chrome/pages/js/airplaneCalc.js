var airports,airplanes,calculator;calculator=new FlightsFootprintCommon;var AirplaneEmissionForm={emissionRate:3.16,nmi_to_km:1.852,submit:function(){var o,i=$("#AirplaneEmissionForm").serializeObject(),t=airports[i.depPort],r=airports[i.desPort];if("none"!=i.stopPort){var a=airports[i.stopPort];o=calculator.getDistance(t.lat,t.lon,a.lat,a.lon)+calculator.getDistance(a.lat,a.lon,r.lat,r.lon)}else o=calculator.getDistance(t.lat,t.lon,r.lat,r.lon);var n=calculator.getEmission([{aircraft:i.airplane,distance:o}])[0].co2Emission;"round"==i.trip&&(n*=2),$("#outputEmission").html(n+"kg of CO<sub>2</sub> per person")},init:function(){$.getJSON(browserServices.getFilePath("/core/resources/airportNames.json"),function(o){airports=o;for(var i in airports)$("#depPort").append('<option value="'+i+'">'+i+"</option>"),$("#stopPort").append('<option value="'+i+'">'+i+"</option>"),$("#desPort").append('<option value="'+i+'">'+i+"</option>");$("#airplaneFormSubmit").on("click",function(){AirplaneEmissionForm.submit()})}),$.getJSON(browserServices.getFilePath("/core/resources/airplanes.json"),function(o){airplanes=o;for(var i in airplanes)"distances"!=i&&"_comment"!=i&&$("#airplane").append('<option value="'+i+'">'+i+"</option>")})}};AirplaneEmissionForm.init();