var absorptionForm={treeStats:{},emissionRate:.255384,timeString:function(e){for(var t="",i=[[" year",525600],[" month",43200],[" day",1440],[" hour",60],[" min",1]],o=0;o<i.length;o++){var r=Math.floor(e/i[o][1]);r>=1&&(t+=r+i[o][0]+(r>1?"s":"")+" ",e-=r*i[o][1])}return t},submit:function(e){var t,i,o=$("#absorptionForm").serializeObject(),r=("metric"!=o.unitSystem?.453592:1)*o.emission,s=$("#emissionUnit option:selected").text();if($("#customTreeCheckbox").is(":checked")){var n=("metric"==o.unitSystem?3.28084:1)*o.treeHeight,a=("metric"==o.unitSystem?.393701:1)*o.treeDiameter,m=o.treeAge,u=(a>=11?.15:.25)*n*a*a;t="given custom",i=1.2*u*.725*.5*3.67*.453592/m}else t=o.treeName,i=e.treeStats[t];var b=525600*r/i,c="It will take <b>"+e.timeString(b)+"</b>for a <b>"+t+"</b> tree to absorb <b>"+o.emission+" "+s+"</b> of CO<sub>2</sub>.",l=r/1.04326*24*60,h="The same amount of CO<sub>2</sub> will be produced by a human (through respiration) in <b>"+e.timeString(l)+"</b>.",p=r/e.emissionRate,v="km";"metric"!=o.unitSystem&&(p*=.621371,v="miles");var S="Also, a car would have to travel <b>"+p.toFixed(2)+" "+v+"</b> to produce <b>"+o.emission+" "+s+"</b> of CO<sub>2</sub>.";$("#outputAbsorption").html(c+"<br>"+h+"<br>"+S)},init:function(){var e=this;$.getJSON(browserServices.getFilePath("/core/resources/trees.json"),function(t){e.treeStats=t.treeData;for(var i in e.treeStats)$("#treeName").append('<option value="'+i+'">'+i+"</option>");$("#absorptionFormSubmit").on("click",function(){e.submit(e)})}),browserServices.getStorage("calculationObject",function(t){e.emissionRate=t.calculationObject.CO2emissionRate||.255384}),$("#customTreeCheckbox").change(function(){$(this).is(":checked")?($("#customTreeInput").show(),$("#treeName").prop("disabled",!0)):($("#customTreeInput").hide(),$("#treeName").prop("disabled",!1)),$(".outputDiv").html("")})}};absorptionForm.init();