function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var BasicValidator=function(){function e(t,i){_classCallCheck(this,e),this.website=t,this.type=i,this.isWorking=!0,this.storageManager=new storageManager}return _createClass(e,[{key:"counterMeasure",value:function(e){this.isWorking=!1,this.updateCheck(this.isWorking),this.server.error(this.website,e)}},{key:"getByClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=t.getElementsByClassName(e);return i.length?this.isWorking&&this.updateCheck(this.isWorking):this.counterMeasure("cant get class "+e),i}},{key:"getById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=t.getElementById(e);return i?this.isWorking&&this.updateCheck(this.isWorking):this.counterMeasure("cant get id "+e),i}},{key:"getByTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=t.getElementsByTagName(e);return i.length?this.isWorking&&this.updateCheck(this.isWorking):this.counterMeasure("cant get tag "+e),i}},{key:"querySelector",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=t.querySelector(e);return i?this.isWorking&&this.updateCheck(this.isWorking):this.counterMeasure("invalid element"),i}},{key:"querySelectorAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=t.querySelectorAll(e);return i.length?this.isWorking&&this.updateCheck(this.isWorking):this.counterMeasure("invalid element"),i}},{key:"getChildNode",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=0,n=e.length;i<n;i++)t&&t.childNodes.length?t=t.childNodes[e.shift()]:this.counterMeasure("invalid childNodes");if(t)return this.isWorking&&this.updateCheck(this.isWorking),t;this.counterMeasure("invalid childNodes")}},{key:"isString",value:function(e){"string"!=typeof e||0===e.length?this.counterMeasure("not a string"):this.isWorking&&this.updateCheck(this.isWorking)}},{key:"isNumber",value:function(e){"number"!=typeof e?this.counterMeasure("not a number"):this.isWorking&&this.updateCheck(this.isWorking)}},{key:"updateCheck",value:function(e){var t=this;this.storageManager.getStorage("data",function(i){if(i.data){if(!(i.data.syncTimeStamp&&(Date.now()-i.data.syncTimeStamp)/36e5<=24)){for(var n in i.data)for(var a in i.data[n])i.data[n][a].working=!0;Server.syncWithSentry(function(e){e.forEach(function(e){for(var t in i.data)for(var n in i.data[t]){var a=new RegExp(i.data[t][n].regex);if(a.test(e))return void(i.data[t][n].working&&(i.data[t][n].working=!1))}}),i.data.syncTimeStamp=Date.now(),t.storageManager.insertStorage("data",i,function(){})})}i.data[t.type][t.website].working!=e&&(i.data[t.type][t.website].working=e,t.storageManager.insertStorage("data",i,function(){}))}})}}]),e}();