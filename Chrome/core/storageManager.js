function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),e}var storageManager=function(){function e(){_classCallCheck(this,e),this.isChrome=!1,this.isFirefox=!1,this.isSafari=!1,-1!=navigator.userAgent.toLowerCase().indexOf("chrom")?this.isChrome=!0:-1!=navigator.userAgent.toLowerCase().indexOf("safari")?this.isSafari=!0:-1!=navigator.userAgent.toLowerCase().indexOf("firefox")&&(this.isFirefox=!0)}return _createClass(e,[{key:"getStorage",value:function(e,s){var t=this;try{t.isChrome?chrome.storage.sync.get(e,s):t.isFirefox?browser.storage.sync.get(e,s):t.isSafari&&(safari.self.tab.dispatchMessage(e,{type:"getItem"}),safari.self.addEventListener("message",function(t){if(t.name===e)if(null!==t.message){var a={};a[e]=t.message,s(a)}else s({})},!1))}catch(e){var a=new XMLHttpRequest;a.open("GET","../pages/data/settings.json"),a.onreadystatechange=function(e){4==a.readyState&&200==a.status&&s(JSON.parse(a.responseText))},a.send()}}},{key:"insertStorage",value:function(e,s,t){if(s.hasOwnProperty(e)){var a=this;a.isChrome?chrome.storage.sync.set(s,function(){t(s)}):a.isFirefox?browser.storage.sync.set(s).then(function(){t(s)}):a.isSafari&&(safari.self.tab.dispatchMessage(e,{type:"setItem",item:s[e]}),t(s))}else t({})}}]),e}();