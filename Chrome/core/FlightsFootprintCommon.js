function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var FlightsFootprintCommon=function(t){function e(){var t;return _classCallCheck(this,e),t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this)),dataHelper=new FlightDataHelper,dataHelper.getData("core/resources/airplanes.json",function(t){flightData.airplanesData=t}),dataHelper.getData("core/resources/airports.json",function(t){flightData.airportsData=t}),t}return _inherits(e,t),_createClass(e,[{key:"getCoordinates",value:function(t){for(var e=0,a=t.length;e<a;e++)if(t[e].departCoordinates=flightData.airportsData[t[e].depart],t[e].arriveCoordinates=flightData.airportsData[t[e].arrive],t[e].stopCoordinatesNew=[],t[e].stops.length)for(var o=0;o<t[e].stops.length;o++)t[e].stopCoordinatesNew.push(flightData.airportsData[t[e].stops[o]]);return t}},{key:"getDistance",value:function(t,e,a,o){var r=.017453292519943295,n=Math.cos,i=.5-n((a-t)*r)/2+n(t*r)*n(a*r)*(1-n((o-e)*r))/2;return 12742*Math.asin(Math.sqrt(i))}},{key:"getEmission",value:function(t){for(var a=0,o=t.length;a<o;a++){for(var r,n,i,s,f=t[a].aircraft,p=0,u=flightData.airplanesData.distances.length;p<u;p++)if(flightData.airplanesData.distances[p]*e.NMI_TO_KM>t[a].distance){n=flightData.airplanesData[f].fuel[p],s=flightData.airplanesData.distances[p]*e.NMI_TO_KM,p>0?(r=flightData.airplanesData[f].fuel[p-1],i=flightData.airplanesData.distances[p-1]*e.NMI_TO_KM):(r=n,i=s);break}n?fuelConsumption=s!=i?r+(n-r)/(s-i)*(t[a].distance-i):n:(l=flightData.airplanesData[f].fuel.length-1,slope=(flightData.airplanesData[f].fuel[l]-flightData.airplanesData[f].fuel[l-1])/(flightData.airplanesData.distances[l]*e.NMI_TO_KM-flightData.airplanesData.distances[l-1]*e.NMI_TO_KM),fuelConsumption=slope*(t[a].distance-flightData.airplanesData.distances[l]*e.NMI_TO_KM)+flightData.airplanesData[f].fuel[l]),t[a].co2Emission=this.convertFuelToCO2(fuelConsumption,f)}return t}},{key:"convertFuelToCO2",value:function(t,a){var o={economy:Math.floor(t*e.CO2_FOR_JETFUEL/flightData.airplanesData[a].capacity),business:Math.floor(t*e.CO2_FOR_JETFUEL/flightData.airplanesData[a].capacityTwoClass)};return o.average=Math.floor((o.economy+o.business)/2),o}}]),e}(CarbonFootprintCommon);FlightsFootprintCommon.CO2_FOR_JETFUEL=3.16,FlightsFootprintCommon.NMI_TO_KM=1.852;var flightData={};