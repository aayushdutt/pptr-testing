function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var busData,busEmissionData,wanderuManager=function(){function e(t,n){_classCallCheck(this,e),this.footprintCore=t,this.settingsProvider=n,this.dataSource="america",this.stations={arrive:"",depart:""},this.subtree=!0,this.validator=new TrainsValidator("wanderu"),this.footprintCore.storeDataSource(this.dataSource),this.footprintCore.getData(this.footprintCore.helper.getFilePath("core/resources/busesEmissions.json"),function(e){busEmissionData=e.america}),this.footprintCore.getData(this.footprintCore.helper.getFilePath("core/resources/buses.json"),function(e){busData=e.america}),this.footprintCore.storeTrainSpeed("america")}return _createClass(e,[{key:"setStyle",value:function(e){return e.style.margin="0 1em",e.style.display="inline",e}},{key:"insertInDom",value:function(e,t){t=t.querySelector(".duration-isD35"),e=this.setStyle(e),0===t.getElementsByClassName("carbon").length&&t.appendChild(e)}},{key:"update",value:function(){var e=this;0!==document.querySelectorAll(".search-result-component").length&&document.querySelectorAll(".search-result-component").forEach(function(t){if(0===t.getElementsByClassName("carbon").length){if(!t.querySelector(".modesAndDetailsContainer-2UCxL svg")){if(t.querySelector(".spinner-2BYWJ.loaderContainer-AcoWE"))return;var n=Boolean(t.querySelector("img[alt=bus]")),r=Boolean(t.querySelector("img[alt=train]")),a=0,i=t.querySelector(".time-1ZF-5.depart-13UFM").textContent.trim().split(""),o=t.querySelector(".time-1ZF-5.arrive-34qer").textContent.trim().split("");"P"===i[i.length-2]?(i=i.join("").split(":"),i[0]=Number(i[0])%12+12):i=i.join("").split(":"),i=i.map(function(e){return parseInt(e,10)}),"P"===o[o.length-2]?(o=o.join("").split(":"),o[0]=Number(o[0])%12+12):o=o.join("").split(":"),o=o.map(function(e){return parseInt(e,10)});var s=new Date(0,0,0,i[0],i[1],0),l=new Date(0,0,0,o[0],o[1],0),c=l.getTime()-s.getTime(),u=c/36e5;return u<0&&(u+=24),r?(distanceBetween=trainSpeedData.average*u,a=trainData.average*distanceBetween):(distanceBetween=busData.average*u,a=busEmissionData.average*distanceBetween),void e.insertInDom(e.footprintCore.createHTMLElement(a),t)}if(t.querySelector("table.tripDetailsTableContainer-1L_hJ")){if(n=Boolean(t.querySelector("img[alt=bus]")),r=Boolean(t.querySelector("img[alt=train]")),a=0,!(!n&&!r||n&&r)){var p=t.querySelectorAll("tbody tr"),d=0;return p.forEach(function(e,t){if(e.querySelector("td:nth-child(3)").textContent){var n=e.querySelector("td:nth-child(3)").textContent.trim().split(""),r=p[t+1].querySelector("td:nth-child(2)").textContent.trim().split("");"P"===n[n.length-2]?(n=n.join("").split(":"),n[0]=Number(n[0])%12+12):n=n.join("").split(":"),n=n.map(function(e){return parseInt(e,10)}),"P"===r[r.length-2]?(r=r.join("").split(":"),r[0]=Number(r[0])%12+12):r=r.join("").split(":"),r=r.map(function(e){return parseInt(e,10)});var a=new Date(0,0,0,n[0],n[1],0),i=new Date(0,0,0,r[0],r[1],0),o=i.getTime()-a.getTime(),s=o/36e5;s<0&&(s+=24),d+=s}}),r?(distanceBetween=trainSpeedData.average*d,a=trainData.average*distanceBetween):(distanceBetween=busData.average*d,a=busEmissionData.average*distanceBetween),void e.insertInDom(e.footprintCore.createHTMLElement(a),t)}if(n&&r){var m=0,h=0;return p=t.querySelectorAll("tbody tr"),d=0,p.forEach(function(e,t){if(e.querySelector("td:nth-child(3)").textContent){var n=e.querySelector("td:nth-child(5)").textContent.indexOf("Train")>0?"train":"bus",r=e.querySelector("td:nth-child(3)").textContent.trim().split(""),a=p[t+1].querySelector("td:nth-child(2)").textContent.trim().split("");"P"===r[r.length-2]?(r=r.join("").split(":"),r[0]=Number(r[0])%12+12):r=r.join("").split(":"),r=r.map(function(e){return parseInt(e,10)}),"P"===a[a.length-2]?(a=a.join("").split(":"),a[0]=Number(a[0])%12+12):a=a.join("").split(":"),a=a.map(function(e){return parseInt(e,10)});var i=new Date(0,0,0,r[0],r[1],0),o=new Date(0,0,0,a[0],a[1],0),s=o.getTime()-i.getTime(),l=s/36e5;l<0&&(l+=24),"train"===n?h+=l:m+=l}}),distanceBetween=trainSpeedData.average*h,a+=trainData.average*distanceBetween,distanceBetween=busData.average*m,a+=busEmissionData.average*distanceBetween,void e.insertInDom(e.footprintCore.createHTMLElement(a),t)}}}})}}]),e}(),WebsiteManager=wanderuManager;