function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var BingMapsManager=function(){function e(t,i){_classCallCheck(this,e),this.footprintCore=t,this.settingsProvider=i,this.subtree=!0,this.validator=new MapsValidator("bing")}return _createClass(e,[{key:"isDriving",value:function(){return!!document.getElementsByClassName("dirBtnDrive dirBtnSelected")[0]}},{key:"isTransit",value:function(){return!!document.getElementsByClassName("dirBtnTransit dirBtnSelected")[0]}},{key:"getAllDrivingRoutes",value:function(){var e=[];if(this.isDriving())for(var t=this.validator.getByClass("drTitle"),i=t.length-1;i>=0;i--)t[i].childNodes.length>0&&e.push(t[i]);return e}},{key:"getAllTransitRoutes",value:function(){var e=[];if(this.isTransit())for(var t=this.validator.getByClass("drTitle"),i=t.length-1;i>=0;i--)t[i].childNodes.length>0&&e.push(t[i]);return e}},{key:"getDistanceString",value:function(e){var t=this.validator.getByClass("drTitleRight",e)[0].innerHTML;return this.validator.isString(t),t}},{key:"getTimeString",value:function(e){var t=this.validator.getByClass("drTitleRight",e)[0].innerHTML;return this.validator.isString(t),t=" "+t}},{key:"convertDistance",value:function(e){if(e){var t=e.split(/ /),i=t[0],n=t[1];return this.footprintCore.getDistanceFromStrings(i,n)}}},{key:"convertTime",value:function(e){if(e){var t=/ (\w*) d/.exec(e),i=/ (\w*) h/.exec(e),n=/ (\w*) m/.exec(e);return i=i?parseFloat(i[1]):0,n&&(n=parseFloat(n[1]),i+=n/60),t&&(t=parseFloat(t[1]),i+=24*t),i}}},{key:"insertFootprintElement",value:function(e,t){0===e.getElementsByClassName("carbon").length&&this.validator.getByClass("drTitleRight",e)[0].appendChild(t)}},{key:"insertTravelCostElement",value:function(e,t){0===e.getElementsByClassName("travelCost").length&&this.validator.getByClass("drTitleRight",e)[0].appendChild(t)}},{key:"update",value:function(){var e=document.getElementsByClassName("directionsPanel")[1],t=[],i=[];e&&(t=this.getAllDrivingRoutes(),i=this.getAllTransitRoutes());for(var n=0;n<t.length;n++){var r=this.getDistanceString(t[n]),s=this.convertDistance(r);this.insertFootprintElement(t[n],this.footprintCore.createFootprintElement(s)),this.settingsProvider.showTravelCost()&&this.insertTravelCostElement(t[n],this.footprintCore.createTravelCostElement(s))}for(n=0;n<i.length;n++){var a=this.getTimeString(i[n]),l=this.convertTime(a);this.insertFootprintElement(i[n],this.footprintCore.createPTFootprintElement(l))}}}]),e}(),WebsiteManager=BingMapsManager;