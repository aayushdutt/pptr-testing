function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var GoogleMapsManager=function(){function e(t,i){_classCallCheck(this,e),this.footprintCore=t,this.settingsProvider=i,this.validator=new MapsValidator("google"),this.subtree=!0,this.allRoutes=[]}return _createClass(e,[{key:"getMode",value:function(e){for(var t=this.validator.getByClass("section-directions-trip-travel-mode-icon",e),i=t.length-1;i>=0;i--){if("none"!=t[i].parentElement.style.display){return t[i].classList[1]}}}},{key:"getAllRoutes",value:function(){for(var e=[],t=document.getElementsByClassName("section-directions-trip clearfix"),i=t.length-1;i>=0;i--)t[i].childNodes.length>0&&e.push(t[i]);this.allRoutes=e}},{key:"getAllDrivingRoutes",value:function(){for(var e=[],t=this.allRoutes,i=t.length-1;i>=0;i--)"drive"==this.getMode(t[i])&&e.push(t[i]);return e}},{key:"getAllTransitRoutes",value:function(){for(var e=[],t=this.allRoutes,i=t.length-1;i>=0;i--)"transit"==this.getMode(t[i])&&e.push(t[i]);return e}},{key:"transitWalkingTime",value:function(){var e=document.getElementsByClassName("section-directions-trip-walking-duration section-directions-trip-secondary-text");return walkingTimeInMin=60*this.convertTime(e[0].innerText),walkingTimeInMin}},{key:"dataFromDrivingMode",value:function(e,t){return e=e.substring(1,e.length-1),distanceInKm=this.convertDistance(e),"flag"==dataType?"km":distanceInKm}},{key:"dataFromTransitMode",value:function(e,t){return totalTimeInMin=60*this.convertTime(" "+e.substring(1,e.length-1)),"flag"==t?"min":[totalTimeInMin,this.transitWalkingTime()]}},{key:"travelInfo",value:function(e){route=document.getElementsByClassName("section-trip-summary-subtitle"),route=document.getElementsByClassName("section-trip-summary-subtitle"),count=0;for(var t=0;t<route.length;t++){if(route[t].innerText.length>2){dataString=route[t].innerText;break}count++}return 0===count&&route.length>0?this.dataFromDrivingMode(dataString,e):1===count&&route.length>0?this.dataFromTransitMode(dataString,e):{status:!1}}},{key:"getDistanceString",value:function(t){var i=this.validator.getByClass(e.infoClasses[0]+" "+e.infoClasses[1],t)[0],n=this.validator.getChildNode([5],i).innerHTML;return this.validator.isString(n),n}},{key:"getTimeString",value:function(t,i){if("n"==i){var n=this.validator.getByClass(e.durationClass,t)[0].innerHTML,s=this.validator.getByClass(e.walkingSummary[0]+" "+e.walkingSummary[1],t)[0].innerText;return n=" "+n,this.validator.isString(n),[n,s]}return n=t.getElementsByClassName("ml-directions-selection-screen-lines-section-right")[0].innerText,n=" "+n}},{key:"convertDistance",value:function(e){if(e){var t=e.replace("&nbsp;"," ").split(/ /),i=t[0],n=t[1],s=this.footprintCore.getDistanceFromStrings(i,n);return this.validator.isNumber(s),s}}},{key:"convertTime",value:function(e){if(e){var t=/ (\w*) d/.exec(e),i=/ (\w*) h/.exec(e),n=/ (\w*) m/.exec(e);return i=i?parseFloat(i[1]):0,n&&(n=parseFloat(n[1]),i+=n/60),t&&(t=parseFloat(t[1]),i+=24*t),this.validator.isNumber(i),i}}},{key:"insertFootprintElement",value:function(t,i,n){if(0===t.getElementsByClassName("section-directions-trip-numbers")[0].getElementsByClassName("carbon").length)switch(n){case"d":this.validator.getByClass(e.infoClasses[0]+" "+e.infoClasses[1],t)[0].appendChild(i);break;case"t":this.validator.getByClass("section-directions-trip-numbers",t)[0].appendChild(i)}}},{key:"insertTransitElement",value:function(t,i,n){0===document.getElementsByClassName("carbon").length&&0==document.getElementsByClassName("section-directions-trip").length&&("d"==n?document.getElementsByClassName(e.infoTransitClasses4D[0]+" "+e.infoTransitClasses4D[1])[0].appendChild(i):document.getElementsByClassName(e.infoTransitClasses4T)[0].appendChild(i))}},{key:"insertInLiteMaps",value:function(t,i,n){"t"==n?0===t.getElementsByClassName(e.insertInLiteTransit)[0].getElementsByClassName("carbon").length&&this.validator.getByClass(e.insertInLiteTransit,t)[0].append(i):(t.getElementsByClassName("carbon").length>0&&this.validator.getByClass("carbon",t)[0].parentElement.remove(),0===t.getElementsByClassName(e.insertInLiteDriving)[0].getElementsByClassName("carbon").length&&this.validator.getByClass(e.insertInLiteDriving,t)[0].append(i))}},{key:"insertDetailedFootprintElement",value:function(){unit=this.travelInfo(dataType="flag"),data=this.travelInfo(dataType="data"),type="t","km"==unit?(type="d",dataElement=this.footprintCore.createFootprintElement(data,"d")):"min"==unit&&(type="t",totalTransitTime=data[0],totalWalkingTime=data[1],dataElement=this.footprintCore.createPTransitFootprintElement(data,"t")),targetElement=document.getElementsByClassName(e.summaryTitleClass);try{this.insertTransitElement(targetElement,dataElement,type)}catch(e){}}},{key:"insertTravelCostElement",value:function(t,i){0===t.getElementsByClassName("travelCost").length&&this.validator.getByClass(e.infoClasses[0]+" "+e.infoClasses[1],t)[0].appendChild(i)}},{key:"googleMaps",value:function(){this.getAllRoutes()}},{key:"liteGoogleMaps",value:function(){this.liteMapsDrivingMode(),this.liteMapsTransitMode()}},{key:"liteMapsTransitMode",value:function(){try{var t=this.validator.getByClass(e.transitLiteModeScreen)[0];t=this.validator.getByClass("ml-directions-selection-screen-row",t);for(var i=0;i<t.length;i++)timeString=this.getTimeString(t[i]),timeInMins=60*this.convertTime(timeString,"l"),this.insertInLiteMaps(t[i],this.footprintCore.createPTransitFootprintElement([timeInMins,0],"t"),"t")}catch(e){}}},{key:"liteMapsDrivingMode",value:function(){try{var e=this.drivingLiteModeScreen,t=document.getElementsByClassName("ml-directions-pane-header-distance")[0].innerText;if(t.length>0){t=t.substring(1,t.length-1),this.validator.isString(t);var i=this.convertDistance(t);this.validator.isNumber(i);for(var n=0;n<e.length;n++)targetElement=this.validator.getByClass(e[n])[0],this.insertInLiteMaps(targetElement,this.footprintCore.createFootprintElement(i),"d");this.settingsProvider.showTravelCost()&&this.insertTravelCostElement(this.validator.getByClass(e[0])[0],this.footprintCore.createTravelCostElement(i))}}catch(e){}}},{key:"update",value:function(){if(document.getElementsByClassName("ml-directions-pane-toggle").length>0)this.liteGoogleMaps();else{this.googleMaps();var e,t=this.getAllDrivingRoutes(),i=this.getAllTransitRoutes();for(e=0;e<t.length;e++){var n=this.getDistanceString(t[e]),s=this.convertDistance(n);this.insertFootprintElement(t[e],this.footprintCore.createFootprintElement(s),"d"),this.settingsProvider.showTravelCost()&&this.insertTravelCostElement(t[e],this.footprintCore.createTravelCostElement(s))}for(e=0;e<i.length;e++){var a=this.getTimeString(i[e],"n"),r=60*this.convertTime(a[0]),o=60*this.convertTime(a[1]);this.insertFootprintElement(i[e],this.footprintCore.createPTransitFootprintElement([r,o],"t"),"t")}check=document.getElementsByClassName("section-trip-summary-subtitle"),check.length>0&&this.insertDetailedFootprintElement()}}}]),e}();GoogleMapsManager.infoClasses=["section-directions-trip-distance","section-directions-trip-secondary-text"],GoogleMapsManager.durationClass="section-directions-trip-duration",GoogleMapsManager.summaryTitleClass="section-trip-summary-description",GoogleMapsManager.infoTransitClasses4D=["section-directions-trip-summary","section-directions-trip-secondary-text"],GoogleMapsManager.walkingSummary=["section-directions-trip-walking-duration","section-directions-trip-secondary-text"],GoogleMapsManager.infoTransitClasses4T="section-trip-summary",GoogleMapsManager.drivingLiteModeScreen=["ml-directions-pane-scrollable","ml-directions-pane-underscroll-header"],GoogleMapsManager.transitLiteModeScreen="ml-directions-selection-screen",GoogleMapsManager.insertInLiteTransit="ml-directions-selection-screen-transit-further-details",GoogleMapsManager.insertInLiteDriving="ml-directions-pane-header-line-summary-container";var WebsiteManager=GoogleMapsManager;